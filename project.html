<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="portfolio.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');
    </style>

    <!--The next three lines allow the Vega embed-->
<script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>

</head>



<body>

    <h1>James Wilkins' Data Science Project 2021.</h1>

    <h3><b>Have financial markets and the economy become disconnected? The changing relationship between the macroeconomy and financial markets. </b></h3>
    
    <p><a href="https://james-wilkins.github.io/portfolio">Back to Portfolio</a></p>

    <p>Since the beginning of the pandemic, there has been an ever-growing disconnect between the real and financial economy. As unemployment soared and 
       GDP fell rapidly, stock markets soared as the Federal Reserve in the USA began to add to their balance sheets, with Financial indexes such as the 
       Russell 2000 and SP500 soaring and rallying to record highs. Even at a first glance comparing some macroeconomic variables with US stock markets 
       in the aftermath of COVID 19. This disparity is visually clear. This project aimed to empirically test for this disparity in both a visual and 
       statistical sense.</p>
       

   
    
   <h3>A Visual Divergence</h3> 
        
<div class="chart" id="firstprojectChart">
  <script>
    var myprojectChart1 = "project_chart1SP500vsSentiment.json";
    vegaEmbed('#firstprojectChart', myprojectChart1);
  </script>
</div>
        
   <p>In this graph, I have Indexed the SP500 and the University of Michigan Consumer Sentiment Index to 100 in a local csv file. Ideally I would
      have automated this data using the 'FRED' API, however, I needed to index the data in excel in order to create a visually interpretable disparity.</p>
      
   <p>I should note that much of my representation of the 'financial economy' is based on the SP500. I made this choice as its revenue exposure is the most 
      global of all equity indexes. Additionally, it is highly liquid and hence its data is generally accurate does not require much cleaning.</p>
    
<div class="chart" id="secondprojectChart">
  <script>
    var myprojectChart2 = "project_chart2EquityIndexes.json";
    vegaEmbed('#secondprojectChart', myprojectChart2);
  </script>
</div>
   
    
   <p>Above, we can also see that this rally is not solely a U.S centric one. Here I have used an API to display the post-covid rally of four other equity
      indexes. The Nasdaq(USA), Dow Jones(USA), DAX(Germany) and Bovespa(Brazil). Annoyingly, because of the way the json data was formatted, I could not
      implement a key specifying which index each line referred to as it was not mentioned in the data, only in the url of the api request. Additionally, the
      data for each index came from separate API links and hence i had to format it as such. For the readers reference; Purple: Bovespa ,
      Cyan:Dow Jones, Green:DAX, Red:Nasdaq.</p>
  
    
    
 <h3>A Sign of Overvaluation</h3>    
    
    
    
<div class="chart" id="thirdprojectChart">
  <script>
    var myprojectChart3 = "project_chartperatio.json";
    vegaEmbed('#thirdprojectChart', myprojectChart3);
  </script>
</div>
    

 <p>Above I have Web Scraped the 'Multpl' Website for the month by month Shiller PE Ratio data to test for an overvalued market. The pandas library achieved this
  with ease, and i was able to sort the data from old to new. I then downloaded the csv to my repository.</p>
  
    
 <p><a href="https://raw.githubusercontent.com/James-Wilkins/James-Wilkins.github.io/main/ShillerScrape.ipynb">Notebook Code</a></p>
    
    
<h3>A Test of the Culprit</h3>     
    
    
    
<p>In these charts I have decided to empirically test one of the main hypotheses for the cause of this divergence; Central Banks. Many believe that the divergence
   between the real and financial economy has been driven by the quantitative easing by central banks such as the Federal Reserve and hence equities have become
   overvalued. The chart below shows the increasing balance sheet of central banks in recent years as well as over COVID.</p> 
 
    
<div class="chart" id="fourthprojectChart">
  <script>
    var myprojectChart4 = "project_chartAssets.json";
    vegaEmbed('#fourthprojectChart', myprojectChart4);
  </script>
</div>
    
<p>Ideally, I would have automated the chart above, however Data on Global Central Banks assets is measured in different ways and at different time
  frequencies therefore it made more sense to collate it into a csv file.</p> 
    
    
<div class="chart" id="fifthprojectChart">
  <script>
    var myprojectChart5 = "project_chartqe.json";
    vegaEmbed('#fifthprojectChart', myprojectChart5);
  </script>
</div>
    
<p>The tri-axis chart above demonstrates the relationship between SP500 and 10 Year Treasury Notes, the latter of which acting as
   a proxy for the U.S QE Programme.</p> 
    
<div class="chart" id="sixthprojectChart">
  <script>
    var myprojectChart6 = "project_chartCBRegression.json";
    vegaEmbed('#sixthprojectChart', myprojectChart6);
  </script>
</div>
    
<p>The linear regression above produced a relatively high R-squared value of 0.77, however is by no means a proof of causation.</p>    
  

 <h3>Changing Relationships</h3> 
 
    
    
    <p>My final two charts were inspired by a concept called ‘Macroeconomic Class Factor Models’, that use statistical analysis to decompose macroeconomic 
       systematic risk. Using a multivariable regression using the sklearn toolkit library in a Colab Notebook in Python, I regressed macroeconomic factors
       against the SP500 using a pre-covid and post-covid dataset. I kept the number of factors limited in order to avoid the issue of collinearity.</p>
   
    
    <p>Pre-Covid</p>


<div class="chart" id="seventhprojectChart">
  <script>
    var myprojectChart7 = "project_chartpre.json";
    vegaEmbed('#seventhprojectChart', myprojectChart7);
  </script>
</div>
    
    <p>Post-Covid</p>
    
<div class="chart" id="eighthprojectChart">
  <script>
    var myprojectChart8 = "project_chartpost.json";
    vegaEmbed('#eighthprojectChart', myprojectChart8);
  </script>
</div>

       
   <p>There were some significant challenges in the above visualistation. Due to the way that some of these macroeconomic factors are measured such as
      consumer sentiment, their correlation  coefficients were highly varied in magnitude meaning that the data was extremely skewed. If the magnitudes
      were all positive I could have used a logarithmic scale however, this was not possible due to having negative coefficients as well as positive ones.
      Using the tooltip function overcame this issue as it enables the user to hover over the bars with much smaller magnitudes.
      Although it should be said that comparing the coefficients at one point in time was not so much the point of this visualisation but rather to see 
      how they had changed prior to Covid and post Covid. And visually it is clear that they have. For example a decrease in the unemployment rate was 
      strongly associated with an increase in the SP500 prior to Covid, but now that relationship has decreased to near 0.</p>
       
  <p><a href="https://raw.githubusercontent.com/James-Wilkins/James-Wilkins.github.io/main/PreCovidRegression.ipynb">Notebook Code for Pre Covid</a>
   <a href="https://raw.githubusercontent.com/James-Wilkins/James-Wilkins.github.io/main/PostCovidRegression.ipynb">Notebook Code for Post Covid</a></p>
    
   
       
    <h3>Conclusion</h3>
    
    
    <p>In conclusion, it should be said that it can be visually be seen that since March 2020, there has been a signficant divergence between the real
       and financial economy. My regressions demonstrate a clearly declining relationshp between macroeconomic variables and the equity valuation of the
       largest 500 companies in the world. However, my discussion of central banks should in no way be taken at face value, in terms of its causal relationship.
       After COVID, it is likely that structural economic changes have taken place and therefore, it would be prudent to assess a variety of possible causes
       of this 'divergence' and to ensure statistical robustness.</p>
        
      
       

</html>
